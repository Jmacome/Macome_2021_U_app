<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Edit defective</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" 
    crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
    crossorigin="anonymous">
</head>

<body class="container" style="margin-top: 50px;">

	<% if (messages.error) { %>
	    <div class="alert alert-danger" role="alert"><%- messages.error %></div>
	<% } %>

    <div class="card"> 
    	<div class="card-header">
            <h1>不良コード<strong style="color:red"><%= defective_code %></strong>を更新して下さい。</h1>        
        </div>
        
        <div class="card-body">
            <form action="/defective/update1/<%= defective_code %>" method="post"> 


                <div class="form-group">
                    <h2> <label>重要不良フラグ:</label></h2>
                    <input required type="number" class="form-control" min='0', max='1' name="importance_flag" 
                    placeholder="<%= importance_flag %>"　value="<%= importance_flag %>" autocomplete="off">
                </div>

                <div class="form-group mt-3">
                    <input type="submit" class="btn btn-info" value="更新"/>
                    <div class="btn btn-secondary">
                        <a href="/defective/select" style="color:white">キャンセル</a>
                    </div>
                </div>
            </form>
<!-- 
            <form action="/defective/update1/<%= defective_code %>" method="post">
                <fieldset>
                    <div id="<%= defective_code %>">                                            
                        <label><input type="checkbox" name="<%= defective_code %>" value="<%= importance_flag %>"></label>
                    </div>
                    <p><label><input type="text" name="total" size="1" value="0"readonly="readonly" /></label></p>
                </fieldset>

                <input type="submit" class="btn btn-info" value="更新"/>

                <script type="text/javascript">
                    function attachCheckboxHandlers() {var importance_flag = document.getElementById("<%= defective_code %>");
                        var tops = importance_flag.getElementsByTagName('input');
                        for (var i=0, len=tops.length; i<len; i++) {
                            if ( tops[i].type === 'checkbox' ) {tops[i].onclick = updateTotal}}                                                 }
                    function updateTotal(e) {var form = this.form;
                        var importance_flag = parseInt( form.elements['total'].value );
                        if ( this.checked ) {importance_flag += parseInt(this.value)}
                        else {importance_flag -= parseInt(this.value)}
                        form.elements['total'].value = importance_flag}
                        attachCheckboxHandlers();
                    <!-- </script> -->
                    <!-- </form> --> 
        </div>
    </div>

</body>
</html>